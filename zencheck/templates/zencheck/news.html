{% extends 'zencheck/home.html'%}
{% load static %}
{% block content %}
    <div class="news-container">
        <div class="headlines-section col-md-6">
            <h3>COVID-19 HEADLINES </h3>
            {% for news in top_headlines %}
            {% if news.image is None %}
            <a href="{{news.url}}" target="blank">
                <div class="news-twitter-box headline-box">
                    <div class="row">
                        <div class="col-md-12 top">
                            <p class="news-twitter-name headline-top">{{news.title}}</p>
                        </div>
                        <div class="container">
                            <div class="twitter-middle headline-middle">
                                <p class="news-twitter-content">{{news.description|striptags}}</p>
                            </div>
                            
                            </div>
                            <div class="twitter-bottom row">
                                <div class="col-md-6 headline-bottom-split">
                                    <p class="news-twitter-creation-date">{{news.publish_at}}</p>
                                </div>
                                {% if news.author is None %}
                                {% else %}
                                <div class="col-md-6 headline-bottom-split headline-author">
                                    <p class="news-twitter-creation-date">{{news.source|truncatewords:3}}</p>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </a>
            {% else %}
            <a href="{{news.url}}" target="blank">
                <div class="news-twitter-box headline-box">
                    <div class="row">
                        <div class="col-md-12 top">
                            <p class="news-twitter-name headline-top">{{news.title}}</p>
                        </div>
                        <div class="container">
                            <div class="twitter-middle headline-middle">
                                <p class="news-twitter-content">{{news.description|striptags}}</p>
                            </div>
                            <div class="twitter-image headline-image">
                                <img src="{{ news.image }}" alt="headline image"
                                    onError="this.onerror=null; this.src='{% static 'assets/icons/newspaper.svg' %}';">
                            </div>
                            <div class="twitter-bottom row">
                                <div class="col-md-6 headline-bottom-split">
                                    <p class="news-twitter-creation-date">{{news.publish_at}}</p>
                                </div>
                                {% if news.author is None %}
                                {% else %}
                                <div class="col-md-6 headline-bottom-split headline-author">
                                    <p class="news-twitter-creation-date ">{{news.source|truncatewords:3}}</p>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        {% endif %}
        {% endfor %}
        </div>
        <div class="twitter-section col-md-6">
            <h3>COVID-19 SMALL BUSINESS UPDATES </h3>
            {% for tweet in tweets %}

            {% if tweet.media_url %}
            <a href="{{ tweet.url }}" target="blank">
                <div class="news-twitter-box">
                    <div class="row">
                        <div class="col-md-7 top">
                            <img class="news-twitter-image-dp" src="{{tweet.user_profile_photo}}">
                            <p class="news-twitter-name">{{ tweet.name|truncatewords:3 }}</p>
                        </div>
                        <div class="col-md-5 top">
                            <p class="news-twitter-handle">@{{ tweet.username }}</p>
                        </div>
                        <div class="container">
                            <div class="twitter-middle">
                                <p class="news-twitter-content">{{ tweet.text|striptags }}</p>
                            </div>
                            <div class="twitter-image">
                                <img src="{{ tweet.media_url }}" alt="twitter image"
                                    onError="this.onerror=null; this.src='https://media.giphy.com/media/NS7gPxeumewkWDOIxi/source.gif';">
                            </div>
            
                            <div class="twitter-bottom row">
                                <div class="col-md-6 headline-bottom-split">
                                <p class="news-twitter-creation-date">{{ tweet.created_at }}</p>
                            </div>

                            <div class="col-md-6 headline-bottom-split headline-author">
                                    <p class="news-twitter-creation-date "> Twitter </p>
                                </div>
                        </div>
                    </div>
                </div>
            </div>
            </a>
            {% else %}
            <a href="{{ tweet.url }}" target="blank">
                <div class="news-twitter-box">
                    <div class="row">
                        <div class="col-md-7 top">
                            <img class="news-twitter-image-dp" src="{{tweet.user_profile_photo}}">
                            <p class="news-twitter-name">{{ tweet.name|truncatewords:3 }}</p>
                        </div>
                        <div class="col-md-5 top">
                            <p class="news-twitter-handle">@{{ tweet.username }}</p>
                        </div>
                        <div class="container">
                            <div class="twitter-middle">
                                <p class="news-twitter-content">{{ tweet.text|striptags }}</p>
                            </div>
                            <div class="twitter-bottom row">
                                <div class="col-md-6 headline-bottom-split">
                                <p class="news-twitter-creation-date">{{ tweet.created_at }}</p>
                            </div>

                            <div class="col-md-6 headline-bottom-split headline-author">
                                    <p class="news-twitter-creation-date "> Twitter </p>
                                </div>
                        </div>
                        </div>
                    </div>
                </div>
            </a>
            {% endif %}
            {% endfor %}
            </div>
        </div>
    </div>
    {% endblock %}